---
import Layout from '../layouts/Layout.astro';
import ModularSection from '../components/ModularSection.astro';
import { Image } from 'astro:assets';
import aboutImage from '../assets/about.png';

// Define modular sections for the about page content
const aboutSections = [
  {
    columns: [
      {
        type: 'content',
        title: 'What I Do',
        content: `
My work spans across multiple domains of robotics and engineering, from autonomous systems to precision manipulation. I'm particularly interested in:

- **Autonomous Robotics**: Developing intelligent systems that can navigate and operate in complex environments
- **Robotic Manipulation**: Creating precise control systems for robotic arms and end effectors
- **Making & Prototyping**: Building physical prototypes and exploring new fabrication techniques
- **Space & Astronomy**: Combining my engineering skills with a passion for space exploration
        `
      }
    ]
  },
  {
    columns: [
      {
        type: 'content',
        title: 'My Approach',
        content: `
I believe in learning by doing. Whether it's building a new robot from scratch, exploring the latest in autonomous navigation, or diving deep into the mechanics of robotic systems, I approach each project with curiosity and a commitment to understanding the fundamentals.

This blog serves as both a documentation of my projects and a place to share insights that might help other makers and engineers on their own journeys.
        `
      }
    ]
  },
  {
    columns: [
      {
        type: 'content',
        title: 'Beyond Engineering',
        content: `
When I'm not working on engineering projects, you'll find me honing my piano skills, fighting combat robots, playing chess, hiking, and spending time with friends and family.
        `
      }
    ]
  },
  {
    columns: [
      {
        type: 'content',
        title: 'Contact Me',
        content: `
If you'd like to get in touch, please use the contact form, reach out to me on LinkedIn, or email me directly.

I'm always open to discussing new and current projects, collaborations, or just sharing ideas about robotics and engineering!
        `
      },
      {
        type: 'content',
        content: `
<div id="contact-form-root" class="not-prose">
  <form
    id="contact-form"
    action="https://formspree.io/f/xjkrjkrp"
    method="POST"
    class="bg-base-200 rounded-2xl shadow-lg flex flex-col gap-6 p-6 w-full"
    autocomplete="off"
  >
    <div class="form-control w-full">
      <label for="name" class="label">
        <span class="label-text font-semibold">Name</span>
      </label>
      <input
        type="text"
        id="name"
        name="name"
        class="input input-bordered w-full"
        required
        autocomplete="name"
      />
    </div>
    <div class="form-control w-full">
      <label for="email" class="label">
        <span class="label-text font-semibold">Email</span>
      </label>
      <input
        type="email"
        id="email"
        name="email"
        class="input input-bordered w-full"
        required
        autocomplete="email"
      />
    </div>
    <div class="form-control w-full">
      <label for="message" class="label">
        <span class="label-text font-semibold">Message</span>
      </label>
      <textarea
        id="message"
        name="message"
        class="textarea textarea-bordered w-full"
        rows="5"
        required
      ></textarea>
    </div>
    <button type="submit" class="btn btn-primary w-full mt-2">Send Message</button>
    <div id="form-status" class="text-success text-center mt-2 hidden"></div>
  </form>
</div>
        `
      }
    ]
  }
];
---

<Layout 
  seo={{
    title: "About Matt Nolan",
    description: "Robotics engineer and maker passionate about building innovative solutions"
  }}
>
  <div class="max-w-7xl mx-auto px-4 py-8">
    <!-- Hero Section - 2 Column Layout -->
    <div class="flex flex-col lg:flex-row gap-12 items-center mb-16">
      <!-- Left Column - Image -->
      <div class="lg:w-2/5 flex justify-center">
        <Image 
          src={aboutImage} 
          alt="Matt Nolan" 
          width={400}
          height={500}
          class="w-full max-w-md rounded-2xl shadow-lg"
        />
      </div>
      
      <!-- Right Column - Content & Actions -->
      <div class="lg:w-3/5 space-y-6">
        <div>
          <h1 class="text-4xl lg:text-5xl font-bold mb-4">About Matt Nolan</h1>
          <p class="text-lg text-base-content/80 leading-relaxed">
            I'm a robotics engineer and maker passionate about building innovative solutions that bridge the gap between cutting-edge technology and practical applications. Welcome to my corner of the internet where I share my projects, insights, and journey through the world of robotics and engineering.
          </p>
        </div>
        
        <!-- Primary action -->
        <div class="mb-6">
          <a href="https://drive.google.com/file/d/11cE8Pdcb1-C2qm9ylWKuBYVIpxJF_Zgl/view?usp=sharing" target="_blank" rel="noopener noreferrer" class="btn btn-primary btn-lg">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
            </svg>
            View Resume
          </a>
        </div>
        
        <!-- Social links -->
        <div class="flex flex-wrap gap-3">
          <a href="https://www.linkedin.com/in/matthew-nolan-011/" target="_blank" rel="noopener noreferrer" class="btn btn-outline btn-md group transition-colors duration-300 hover:bg-[#0077B5] hover:border-[#0077B5] hover:text-white">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 transition-colors duration-300" fill="currentColor" viewBox="0 0 24 24">
              <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
            </svg>
            LinkedIn
          </a>
          <a href="https://youtube.com/@matt-nolan11" target="_blank" rel="noopener noreferrer" class="btn btn-outline btn-md group transition-colors duration-300 hover:bg-[#CC0000] hover:border-[#CC0000] hover:text-white">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 transition-colors duration-300" fill="currentColor" viewBox="0 0 24 24">
              <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
            </svg>
            YouTube
          </a>
          <a href="https://github.com/matt-nolan11" target="_blank" rel="noopener noreferrer" class="btn btn-outline btn-md group transition-colors duration-300 hover:bg-gray-800 hover:border-gray-800 hover:text-white">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 transition-colors duration-300" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
            </svg>
            GitHub
          </a>
        </div>
      </div>
    </div>

    <!-- Content Sections -->
    <ModularSection sections={aboutSections} />
  </div>
</Layout>

<script is:inline>
// Accessible AJAX Formspree handler for in-page confirmation
document.addEventListener('DOMContentLoaded', function () {
  const form = document.getElementById('contact-form');
  const status = document.getElementById('form-status');
  
  if (form && status) {
    form.addEventListener('submit', async function (e) {
      e.preventDefault();
      
      // Reset status
      status.classList.add('hidden');
      status.classList.remove('text-success', 'text-error');
      
      // Show loading state
      const submitBtn = form.querySelector('button[type="submit"]');
      const originalText = submitBtn.textContent;
      submitBtn.textContent = 'Sending...';
      submitBtn.disabled = true;
      
      const data = new FormData(form);
      
      try {
        const res = await fetch(form.action, {
          method: 'POST',
          body: data,
          headers: { 'Accept': 'application/json' },
        });
        
        if (res.ok) {
          form.reset();
          status.textContent = 'Thank you! Your message has been sent.';
          status.classList.remove('hidden');
          status.classList.add('text-success');
        } else {
          const errorData = await res.json().catch(() => ({}));
          status.textContent = errorData.error || 'Sorry, there was a problem. Please try again later.';
          status.classList.remove('hidden');
          status.classList.add('text-error');
        }
      } catch (error) {
        console.error('Form submission error:', error);
        status.textContent = 'Sorry, there was a problem. Please try again later.';
        status.classList.remove('hidden');
        status.classList.add('text-error');
      } finally {
        // Reset button state
        submitBtn.textContent = originalText;
        submitBtn.disabled = false;
      }
    });
  }
});
</script>

<!--
  To activate this form:
  1. Go to https://formspree.io/ and create a free account.
  2. Create a new form and copy your unique endpoint (replace 'your-form-id' above).
  3. Optionally, set up email notifications and spam protection in your Formspree dashboard.
-->
